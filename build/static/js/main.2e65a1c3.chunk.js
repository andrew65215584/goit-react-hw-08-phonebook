(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{11:function(t,e,n){"use strict";n.d(e,"h",(function(){return c})),n.d(e,"i",(function(){return r})),n.d(e,"g",(function(){return o})),n.d(e,"f",(function(){return u})),n.d(e,"a",(function(){return i})),n.d(e,"e",(function(){return b})),n.d(e,"k",(function(){return s})),n.d(e,"l",(function(){return l})),n.d(e,"m",(function(){return O})),n.d(e,"j",(function(){return j})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return d})),n.d(e,"b",(function(){return m}));var a=n(2),c=Object(a.b)("phonebook/GET_FORM_VALUE_Fetch"),r=Object(a.b)("phonebook/GET_FORM_VALUE_Success"),o=Object(a.b)("phonebook/GET_FORM_VALUE_Error"),u=Object(a.b)("phonebook/GET_FORM_VALUE"),i=Object(a.b)("phonebook/DELETE_CONTACT"),b=Object(a.b)("phonebook/GET_FILTER_VALUE"),s=Object(a.b)("phonebook/SET_FILTERED_ARR"),l=Object(a.b)("phonebook/SET_LOCAL_DATA"),O=Object(a.b)("phonebook/SET_NOTIFY"),j=Object(a.b)("phonebook/REMOVE_FILTERED_ARR"),f=Object(a.b)("phonebook/GET_DB_Fetch"),d=Object(a.b)("phonebook/GET_DB_Success"),m=Object(a.b)("phonebook/GET_DB_Error")},25:function(t,e,n){},26:function(t,e,n){"use strict";n.d(e,"d",(function(){return O})),n.d(e,"c",(function(){return j})),n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return d}));var a=n(16),c=n.n(a),r=n(22),o=n(17),u=n.n(o),i=n(11),b=n(6);u.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var s=function(t){u.a.defaults.headers.common.Authorization="Bearer ".concat(t)},l=function(){u.a.defaults.headers.common.Authorization=""},O=function(t){return function(){var e=Object(r.a)(c.a.mark((function e(n,a){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(Object(b.i)()),e.prev=1,e.next=4,u.a.post("/users/signup",t);case 4:r=e.sent,s(r.data),n(Object(b.j)(r.data)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),n(Object(b.h)(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()},j=function(t){return function(){var e=Object(r.a)(c.a.mark((function e(n,a){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(Object(b.c)()),e.prev=1,e.next=4,u.a.post("/users/login",t);case 4:r=e.sent,s(r.data.token),n(Object(b.d)(r.data)),localStorage.setItem("tokenLocal",r.data.token),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),n(Object(b.b)(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()},f=function(t){return function(){var t=Object(r.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(Object(b.f)()),t.prev=1,t.next=4,u.a.post("/users/logout");case 4:l(),e(Object(b.g)()),localStorage.setItem("tokenLocal",""),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(Object(b.e)(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()},d=function(t){return function(){var t=Object(r.a)(c.a.mark((function t(e,n){var a,r,o,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n(),r=a.auth.token){t.next=3;break}return t.abrupt("return");case 3:return s(r),t.prev=4,t.next=7,u.a.get("/users/current");case 7:return o=t.sent,e(Object(b.a)(o.data)),t.next=11,u.a.get("/contacts");case 11:l=t.sent,e(Object(i.d)(l.data)),t.next=17;break;case 15:t.prev=15,t.t0=t.catch(4);case 17:case"end":return t.stop()}}),t,null,[[4,15]])})));return function(e,n){return t.apply(this,arguments)}}()}},47:function(t,e,n){t.exports=n(78)},6:function(t,e,n){"use strict";n.d(e,"i",(function(){return c})),n.d(e,"j",(function(){return r})),n.d(e,"h",(function(){return o})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return i})),n.d(e,"b",(function(){return b})),n.d(e,"f",(function(){return s})),n.d(e,"g",(function(){return l})),n.d(e,"e",(function(){return O})),n.d(e,"a",(function(){return j}));var a=n(2),c=Object(a.b)("auth/REGISTER_USER_Fetch"),r=Object(a.b)("auth/REGISTER_USER_Success"),o=Object(a.b)("auth/REGISTER_USER_Error"),u=Object(a.b)("auth/LOGIN_USER_Fetch"),i=Object(a.b)("auth/LOGIN_USER_Success"),b=Object(a.b)("auth/LOGIN_USER_Error"),s=Object(a.b)("auth/LOGOUT_USER_Fetch"),l=Object(a.b)("auth/LOGOUT_USER_Success"),O=Object(a.b)("auth/LOGOUT_USER_Error"),j=(Object(a.b)("auth/GET_CURRENT_USER_Fetch"),Object(a.b)("auth/GET_CURREN_USER_Success"));Object(a.b)("auth/GET_CURREN_USER_Error")},78:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),r=n(24),o=n.n(r),u=n(4),i=n(28),b=n(7),s=Object(b.b)((function(t){return{isAuthenticated:t.auth.token}}))((function(t){var e=t.component,n=t.isAuthenticated,a=Object(i.a)(t,["component","isAuthenticated"]);return c.a.createElement(u.b,Object.assign({},a,{render:function(t){return n?c.a.createElement(e,t):c.a.createElement(u.a,{to:"/login"})}}))})),l=Object(b.b)((function(t){return{isAuthenticated:t.auth.token}}))((function(t){var e=t.component,n=t.isAuthenticated,a=t.restricted,r=Object(i.a)(t,["component","isAuthenticated","restricted"]);return c.a.createElement(u.b,Object.assign({},r,{render:function(t){return n&&a?c.a.createElement(u.a,{to:"/contacts"}):c.a.createElement(e,t)}}))})),O=(n(25),n(26));var j=function(){var t=Object(b.c)(),e=Object(b.d)((function(t){return t.auth.user.name}));return c.a.createElement("div",{className:"avatar-container"},c.a.createElement("span",null,"\u0412\u044b \u0432\u043e\u0448\u043b\u0438 \u043a\u0430\u043a ",e," "),c.a.createElement("button",{onClick:function(){t(Object(O.b)())}},"\u0412\u044b\u0439\u0442\u0438"))},f=n(15);var d=function(){return c.a.createElement("ul",{className:"nav-list log-list"},c.a.createElement("li",{className:"nav-link"},c.a.createElement(f.b,{to:"/login",className:"nav-link-item"},"\u0412\u043e\u0439\u0442\u0438")),c.a.createElement("li",{className:"nav-link"},c.a.createElement(f.b,{to:"/register",className:"nav-link-item"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u0441\u044f")))},m=function(){var t=Object(b.d)((function(t){return t.auth.token}));return c.a.createElement("nav",null,c.a.createElement("ul",{className:"nav-list"},c.a.createElement("li",{className:"nav-link"},c.a.createElement(f.b,{to:"/home",className:"nav-link-item"},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f")),t&&c.a.createElement("li",{className:"nav-link"},c.a.createElement(f.b,{to:"/contacts",className:"nav-link-item"},"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"))))},E=function(){var t=Object(b.d)((function(t){return t.auth.token}));return c.a.createElement("header",{className:"header"},c.a.createElement(m,null),t?c.a.createElement(j,null):c.a.createElement(d,null))},h=Object(a.lazy)((function(){return n.e(6).then(n.bind(null,88))})),p=Object(a.lazy)((function(){return Promise.all([n.e(5),n.e(3)]).then(n.bind(null,91))})),k=Object(a.lazy)((function(){return n.e(4).then(n.bind(null,89))})),v=Object(a.lazy)((function(){return n.e(7).then(n.bind(null,90))}));var _,R,g=Object(b.b)(null,{getCurrentUser:O.a})((function(t){var e=t.getCurrentUser;return t.isAuthenticated,Object(a.useEffect)((function(){e()}),[e]),c.a.createElement(c.a.Fragment,null,c.a.createElement(E,null),c.a.createElement(a.Suspense,{fallback:c.a.createElement("h3",null,"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c...")},c.a.createElement(u.d,null,c.a.createElement(u.b,{path:"/home",component:h}),c.a.createElement(s,{path:"/contacts",component:p}),c.a.createElement(l,{restricted:!0,path:"/login",component:k}),c.a.createElement(l,{restricted:!0,path:"/register",component:v}))))})),T=n(19),S=n(2),U=n(18),L=n(5),y=n(1),A=n(6),N={user:{name:"",email:""}},G=Object(S.c)(N,(_={},Object(L.a)(_,A.a,(function(t,e){var n=e.payload;return Object(y.a)(Object(y.a)({},t),{},{user:Object(y.a)({},n)})})),Object(L.a)(_,A.j,(function(t,e){var n=e.payload;return Object(y.a)(Object(y.a)({},t),{},{user:Object(y.a)({},n.user),token:n.token})})),Object(L.a)(_,A.d,(function(t,e){var n=e.payload;return Object(y.a)(Object(y.a)({},t),{},{user:Object(y.a)({},n.user),token:n.token})})),Object(L.a)(_,A.g,(function(t,e){e.payload;return Object(y.a)({},N)})),_)),w=n(11),x=Object(S.c)({contacts:{items:[],filter:""},isLoading:!1},(R={},Object(L.a)(R,w.d,(function(t,e){var n=e.payload;return Object(y.a)(Object(y.a)({},t),{},{contacts:Object(y.a)(Object(y.a)({},t.contacts),{},{items:[].concat(Object(T.a)(t.contacts.items),Object(T.a)(n))})})})),Object(L.a)(R,w.f,(function(t,e){var n=e.payload;return Object(y.a)(Object(y.a)({},t),{},{contacts:Object(y.a)(Object(y.a)({},t.contacts),{},{items:Object(T.a)(n)})})})),Object(L.a)(R,w.h,(function(t,e){e.payload;return Object(y.a)(Object(y.a)({},t),{},{isLoading:!t.isLoading})})),Object(L.a)(R,w.i,(function(t,e){var n=e.payload;return Object(y.a)(Object(y.a)({},t),{},{contacts:Object(y.a)(Object(y.a)({},t.contacts),{},{items:[].concat(Object(T.a)(t.contacts.items),[n])})})})),Object(L.a)(R,w.a,(function(t,e){var n=e.payload;return Object(y.a)(Object(y.a)({},t),{},{contacts:Object(y.a)(Object(y.a)({},t.contacts),{},{items:t.contacts.items.filter((function(t){return t.id!==n}))})})})),Object(L.a)(R,w.e,(function(t,e){var n=e.payload;return Object(y.a)(Object(y.a)({},t),{},{contacts:Object(y.a)(Object(y.a)({},t.contacts),{},{filter:n})})})),Object(L.a)(R,w.k,(function(t){return Object(y.a)(Object(y.a)({},t),{},{contacts:Object(y.a)(Object(y.a)({},t.contacts),{},{filteredItems:t.contacts.items.filter((function(e){return e.name.toLowerCase().includes(t.contacts.filter.toLowerCase())}))})})})),Object(L.a)(R,w.l,(function(t,e){var n=e.payload;return Object(y.a)(Object(y.a)({},t),{},{contacts:Object(y.a)(Object(y.a)({},t.contacts),{},{items:n})})})),Object(L.a)(R,w.m,(function(t,e){var n=e.payload;return Object(y.a)(Object(y.a)({},t),{},{contacts:Object(y.a)(Object(y.a)({},t.contacts),{},{setNotify:n})})})),Object(L.a)(R,w.j,(function(t){return Object(y.a)(Object(y.a)({},t),{},{contacts:Object(y.a)(Object(y.a)({},t.contacts),{},{filteredItems:null})})})),R)),F=n(45),I=n.n(F),C=Object(T.a)(Object(S.d)({serializableCheck:{ignoredActions:[U.a,U.f,U.b,U.c,U.d,U.e]}})),z={key:"token",storage:I.a,whitelist:["token"]},D=Object(S.a)({reducer:{auth:Object(U.g)(z,G),phonebook:x},middleware:C}),V=Object(U.h)(D),B=D,M=(n(77),n(46));o.a.render(c.a.createElement(b.a,{store:B},c.a.createElement(M.a,{loading:null,persistor:V},c.a.createElement(f.a,null,c.a.createElement(g,null)))),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.2e65a1c3.chunk.js.map